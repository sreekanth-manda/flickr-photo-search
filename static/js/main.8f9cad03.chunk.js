(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports=a(40)},20:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(12),i=a.n(c),r=(a(20),a(2)),s=a(3),l=a(5),u=a(4),h=a(1),m=a(6),g=a(13),d=a(8),p=a.n(d),f=function(e){var t=e.farm,a=e.server,n=e.id,o=e.secret;return"https://farm".concat(t,".staticflickr.com/").concat(a,"/").concat(n,"_").concat(o,".jpg")},v=function(){return(void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop)<function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)}()-window.innerHeight},k=(a(29),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleImageClick=a.handleImageClick.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleImageClick",value:function(e){e.preventDefault(),this.props.onImageClick(this.props.image)}},{key:"render",value:function(){return o.a.createElement("div",{className:"image-item"},o.a.createElement("img",{className:"image",src:f(this.props.image),onClick:this.handleImageClick,alt:""}))}}]),t}(o.a.Component)),b=(a(30),function(e){var t=e.images,a=e.onImageClick;e.hideFullImage;return o.a.createElement("div",{className:"image-list"},t.map(function(e,t){return o.a.createElement(k,{key:p.a.generate(),image:e,onImageClick:a})}))}),I=(a(31),function(e){var t=e.searchText,a=e.onSearchInputChange;return o.a.createElement("input",{type:"text",className:"search-input",value:t,onChange:a,placeholder:"Search images here"})}),E=a(9),y=a.n(E),w="https://api.flickr.com/services/rest/?format=json&nojsoncallback=1&api_key=".concat("9c3ef160633df475e4adc64f1b7cf7aa"),j=function(e,t){var a="flickr.photos.search",n=t?"".concat(w,"&method=").concat(a,"&text=").concat(e,"&per_page=50&page=").concat(t):"".concat(w,"&method=").concat(a,"&text=").concat(e,"&per_page=50");return y.a.get(n).timeout("15000")},O=function(e){return y.a.get(e).timeout("15000")},C=function(e){var t="".concat(w,"&method=").concat("flickr.photos.getInfo","&photo_id=").concat(e);return y.a.get(t).timeout("15000")},S=(a(38),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).flickrGetPhotoInfo=a.flickrGetPhotoInfo.bind(Object(h.a)(a)),a.handleKeyPress=a.handleKeyPress.bind(Object(h.a)(a)),a.state={imageMetaData:{},loading:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"flickrGetPhotoInfo",value:function(){var e=this;return this.setState({loading:!0}),C(this.props.image.id).then(function(t){var a={};a.owner=t.body.photo.owner.realname,a.dateTaken=t.body.photo.dates.taken;var n=t.body.photo.tags.tag.reduce(function(e,t){return e.push(t.raw),e},[]);a.tags=n,e.setState({imageMetaData:a,loading:!1})}).catch(function(t){console.log(t),e.setState({loading:!1})})}},{key:"handleKeyPress",value:function(e){this.props.hideFullImage()}},{key:"componentDidMount",value:function(){this.flickrGetPhotoInfo()}},{key:"render",value:function(){return o.a.createElement("div",{className:"overlay"},o.a.createElement("div",null,o.a.createElement("button",{class:"close",onClick:this.handleKeyPress}),o.a.createElement("div",{className:"full-image"},o.a.createElement("div",{className:"image-container"},o.a.createElement("img",{src:f(this.props.image),alt:""})),o.a.createElement("div",{className:"image-metadata"},o.a.createElement("span",null,"Owner: ",this.state.imageMetaData.owner),o.a.createElement("span",null,"Date Taken: ",this.state.imageMetaData.dateTaken),o.a.createElement("div",{className:"image-tags"},o.a.createElement("span",null,"Tags:"),o.a.createElement("span",{className:"tags"},this.state.imageMetaData.tags&&this.state.imageMetaData.tags.map(function(e,t){return o.a.createElement("span",{className:"tag",key:p.a.generate()},e,",")})))),this.state.loading&&o.a.createElement("div",{className:"app-loader"}))))}}]),t}(o.a.Component)),N=(a(39),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={searchText:"",imageList:[],pageNumber:1,error:!1,loading:!1,showFullImage:!1,currentImage:{}},a.onSearchInputChange=a.onSearchInputChange.bind(Object(h.a)(a)),a.handleScroll=a.handleScroll.bind(Object(h.a)(a)),a.onImageClick=a.onImageClick.bind(Object(h.a)(a)),a.hideFullImage=a.hideFullImage.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",Object(g.a)(800,this.handleScroll))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(){var e=this,t=[],a=[];v()||(this.setState({loading:!0}),j(this.state.searchText,this.state.pageNumber+1).then(function(n){n.body.photos.photo.forEach(function(e){t.push(O(f(e)).then(function(){return a.push(e)}).catch(function(e){return console.log(e)}))}),Promise.all(t).then(function(){e.setState(function(e,t){return{pageNumber:n.body.photos.page,imageList:e.imageList.concat(a),error:!1,loading:!1}})})}).catch(function(t){return e.setState({error:!0,loading:!1})}))}},{key:"onSearchInputChange",value:function(e){var t=this,a=e.target.value;this.setState({searchText:a,loading:!0}),j(this.state.searchText).then(function(e){return t.setState({imageList:e.body.photos.photo,error:!1,loading:!1})}).catch(function(e){return t.setState({error:!0,loading:!1})})}},{key:"hideFullImage",value:function(){this.setState({showFullImage:!1})}},{key:"onImageClick",value:function(e){this.setState({showFullImage:!0,currentImage:e})}},{key:"render",value:function(){return o.a.createElement("div",{className:"app"},o.a.createElement("div",{className:"app-header"},o.a.createElement("span",{className:"app-title"},"Flickr Photo Search"),o.a.createElement(I,{searchText:this.state.searchText,onSearchInputChange:this.onSearchInputChange})),o.a.createElement("div",{className:"app-content",ref:"appContent"},0!==this.state.imageList.length&&o.a.createElement(b,{images:this.state.imageList,onImageClick:this.onImageClick}),this.state.loading&&o.a.createElement("div",{className:"app-loader"})),this.state.showFullImage&&o.a.createElement(S,{hideFullImage:this.hideFullImage,image:this.state.currentImage}))}}]),t}(o.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[14,1,2]]]);
//# sourceMappingURL=main.8f9cad03.chunk.js.map